## Google Cloud: Identity-Aware Proxy（IAP）の設定をカスタマイズ（更新）するgcloudコマンド

参考: https://cloud.google.com/iap/docs/customizing?hl=ja#gcloud

ymlで設定する場合、まずは以下のようなymlファイルを追加する。

```yml
accessSettings:
  allowedDomainsSettings:
    domains:
      - example.com
    enable: true
```

そして、gloudコマンドでymlファイルへのパスを指定する。

```shell
gcloud iap settings set SETTING_FILE --project=PROJECT-ID \
  --resource-type=RESOURCE-TYPE-NAME
```

具体例。

```shell
gcloud iap settings set iap.yml \
      --project=${var.project_id} \
      --resource-type=compute \
      --service=hoge
```

ちなみに、IAPの設定を取得したい場合は以下のgcloudコマンドを利用する。

```shell
gcloud iap settings get --project=PROJECT-ID \
  --resource-type=RESOURCE-TYPE-NAME
```

## Database Metrics with Prisma, Prometheus & Grafana

k6のスクリプトをアプリのリポジトリで管理して以下のような`npm run`コマンドで呼び出せるようにできる。

`npm run loadtest`

この辺はJSでシナリオが書けるk6ならでは。

参考: https://www.prisma.io/blog/metrics-tutorial-prisma-pmoldgq10kz

##
