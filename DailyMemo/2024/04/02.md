## Laravel: HasFactory

参考: https://readouble.com/laravel/10.x/ja/eloquent-factories.html

ファクトリを定義したら、モデルのファクトリインスタンスをインスタンス化するために、Illuminate\Database\Eloquent\Factories\HasFactory トレイトが、モデルへ提供している static な factory メソッドが使用できる。

## php -m コマンドについて

Show compiled in modules（モジュールにコンパイルされたものを表示）

```shell
php -m | grep pdo
```

## 正規表現

- `+`
  - 直前のパターンの 1 回以上繰り返し（最長一致）

## PHP の match 式

値の一致をチェックした結果に基づいて評価結果を分岐する。

```php
<?php
$food = 'cake';

$return_value = match ($food) {
    'apple' => 'This food is an apple',
    'bar' => 'This food is a bar',
    'cake' => 'This food is a cake',
};

var_dump($return_value);
```

default パターンという特別な場合も存在する。
分岐にマッチしなかった場合のデフォルトの値として使われる。

```php
<?php
$expressionResult = match ($condition) {
    1, 2 => foo(),
    3, 4 => bar(),
    default => baz(),
};
?>
```

## PHP の enum（列挙型）

列挙型(Enumerations)。
PHP8.1 で実装されたらしい

コードの例 ↓

```php
enum AccountStatus
{
    case Active;
    case Inactive;
    case Leave;
}

var_dump(AccountStatus::Active); // enum(AccountStatus::Active)
var_dump(AccountStatus::Active->name); // string(6) "Active"
var_dump(AccountStatus::cases());
// array(3) {
//   [0]=>
//   enum(AccountStatus::Active)
//   [1]=>
//   enum(AccountStatus::Inactive)
//   [2]=>
//   enum(AccountStatus::Leave)
// }
```

AccountStatus::Active とすると enum のインスタンスができる。
インスタンスの->name プロパティへアクセスすると case の値を取得できる。

### Enum とクラスの違い

- 状態を持つことが禁止
- コンストラクタやデストラクタは禁止
- 継承は禁止
- プロパティを持つことは禁止
- public, private, protected メソッド は利用可能
- public, private, protected な static メソッド は利用可能
- public, private, protected な定数 は利用可能
  - など

参考: https://qiita.com/ucan-lab/items/e9f53aa024ca3cc5ea1b

## TypeScript の satisfies について

- TypeScript 4.9 から、satisfies operator が使えるようになった
- 従来の as const と組み合わせ、型チェックと widening 防止を同時に行える
- 結論: TypeScript で 定数を export する場合は、as const satisfies を設定しておくと便利

```ts
export const myName = "田中" as const satisfies string;

export const foodList = {
  ramen: "ラーメン",
  udon: "うどん",
  soba: "そば",
} as const satisfies {
  [key: string]: string;
};
```

- as const satisfies を使用するメリット
  - satisfies 演算子: 型がマッチするかどうかをチェックできる
  - as const: 値が widening （拡大）しない

TODO: 実際に使うべき場面に出会わないとイメージ掴めないかも

参考: https://zenn.dev/tonkotsuboy_com/articles/typescript-as-const-satisfies
参考: https://9sako6.com/posts/why-typescript-satisfies-operator
参考: https://qiita.com/Yametaro/items/494c6e69f7e9bede2197

## PHPDoc について

```php
 /**
   * @param  \Illuminate\Database\Eloquent\Collection<int, \App\Models\User>  $user
   */
  public function canAccessUser(Collection $user): bool;
```

このようにコメントを記述することで、PHPStan に`checkGenericClassInNonGenericObjectType: false`を書かなくてもよくなる。

## 設計について

- これ自体はログインユーザを返すだけの処理だから、そこに path が引数として引き渡されるのが微妙
- 別にどこのページアクセスしようが Basic 認証のユーザ自体は取れてよい

## コントローラに object を返すか？都度 UseCase 内で ValueObject を生成するか？

- 毎回インスタンス作るの無駄だし、全部の場所で同じインスタンス使ったほうが、値が同じことを保証できるから良い？
- コントローラに object を返す？

## Laravel のファクトリの sequence について

参考: https://readouble.com/laravel/10.x/ja/eloquent-factories.html

- モデルを生成するごとに、特定のモデル属性の値を変更したい場合がある
- これは、状態変換を連続データとして定義することで実現できる
- たとえば、作成されたユーザーごとに、admin カラムの値を Y と N の間で交互に変更したい場合、以下のように記述できる

```php
use App\Models\User;
use Illuminate\Database\Eloquent\Factories\Sequence;

$users = User::factory()
  ->count(10)
  ->state(new Sequence(
      ['admin' => 'Y'],
      ['admin' => 'N'],
  ))
  ->create();
```

この例では、admin 値が Y のユーザーが５人作成され、admin 値が N のユーザーが５人作成される。

## Using GitHub Copilot in your IDE: Tips, tricks and best practices

TODO: 読みたい

https://github.blog/2024-03-25-how-to-use-github-copilot-in-your-ide-tips-tricks-and-best-practices/

## 技術記事

- React Forget は何を「忘れ」させてくれるのか
    - URL
        - https://zenn.dev/terass_dev/articles/6f49e44d9cfb0d
    - 内容メモ
        - Meta社からReact Forgetというコンパイラが将来リリースされる
        - React コードを自動的に最適化してくれるコンパイラ
        - JavaScript と React のルールを理解し、ルールに沿ったコードのみを最適化し、これまで useMemo() や React.memo() で行っていたような手動でのメモ化を自動的に行ってくれる
- 業務で使えるかもしれない…！？GitHub Actions の Tips 集
    - URL
        - https://speakerdeck.com/ponkio_o/ci-cd-test-night-number-7?   
    - 内容メモ
        - matrix job
            - 複数のjobを並列で実行できる機能
- ブラウザ上でReactのコードが書けるReact Liveの紹介
    - URL
        - https://zenn.dev/kenchaaan/articles/yamada-components-introduce-react-live
    - 内容メモ
        - React Liveは、React コンポーネントをリアルタイムで編集・プレビューするためのライブラリ
- GitHub、Copilotでより高い精度のコードを生成させる方法を指南。関連ファイルを開く、トップレベルのコメントを書くなど
    - URL
        - https://www.publickey1.jp/blog/24/githubcopilot.html
    - 内容メモ
        - GitHubは、AIがコードの生成を支援してくれるGitHub Copilotを使いこなすテクニックを示した記事「How to use GitHub Copilot in your IDE: Tips, tricks, and best practices」を公開した
            - https://github.blog/2024-03-25-how-to-use-github-copilot-in-your-ide-tips-tricks-and-best-practices/
        - GitHub Copilotでよりよいコードを生成するためのポイント
            - 大規模言語モデルを用いた生成AIでは、コンテキスト（文脈）に基づいて予測を行うように設計されているため、生成AIに対する入力やプロンプトがコンテキストに富んでいるほど良い出力が得られる
                - 関連するファイルを開いておく
                - トップレベルのコメントを書く
                - インクルードや参照を設定しておく
                - 意味のある命名は重要
                - 具体的かつ適切なスコープの関数のコメントを書く
                - サンプルコードを示す