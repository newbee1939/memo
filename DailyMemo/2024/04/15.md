## CommonJSとECMAScript Modules

- Node.jsは古くから`CommonJS`という`独自の`モジュールシステムを採用している
- CommonJSではモジュールの読み込みにrequire関数を用いる
- Node.jsができた頃はまだJavaScriptの`標準仕様`であるECMAScriptにモジュールの仕様がなかった
    - そのためCommonJSを使っていた
- しかし、その後`ECMAScript Modules`というモジュールシステムが標準仕様としてECMAScriptに作成された
- Node.jsも現在ではCommonJSとECMAScript Modulesの両方をサポートしている
- Node.jsユーザーは徐々に標準仕様であるECMAScript Modulesを使い始めている

## GETとPOSTの使い分け

- GETは参照（リソースの取得）のみに用いる
- GETは副作用がないことが期待される
    - 副作用: リソース取得以外の作用
        - データの追加・更新・削除など
- 機密情報の送信にはPOSTメソッドを用いる
- また、GETメソッドはURLにクエリ文字列の形でパラメータを渡すが、ブラウザやサーバが処理できるURLの長さには上限がある
    - データ量が多い場合にはPOSTメソッドを使う方が安全

まとめると、以下が一つでも当てはまる場合はPOSTを用い、1つも当てはまらない場合にはGETメソッドを利用する。

- データ更新など副作用を伴うリクエストの場合
- 機密情報を送信する場合
- 送信するデータの総量が多い場合

## Github Action の Cron ジョブが破棄されやすい時間帯のお話

- Github Action には Cron ジョブがある
- しかしこの Cron、アクション予約としてキューに入れても、実際に動くかどうかに関しては保証していない
- 予定入れたけど、別のプロセスで忙しすぎてキャンセル。そんなイメージ
  - まじか。。
  - 必ず動くわけではないのか。。🥲

参考: https://zenn.dev/rie_amasato/articles/f901ef9fb19415

## Q. サービスに対して IP 制限をかけたい場合、アプリの手前でいる LB で IP 制限をするか、それともアプリの実装で IP 制限するかだとどっちがより良いですか？

azure-ai に聞いてみた。

```
一般的には、アプリケーションの手前にあるロードバランサー（LB）でIP制限をかける方が好ましいです。理由は以下の通りです：
1. **セキュリティ**: LBで制限をかけることで、不正なトラフィックがアプリケーション層に到達する前に遮断されます。これにより、アプリケーションへの攻撃リスクを減らすことができます。

2. **パフォーマンス**: LBは通常、トラフィックを効率的に処理するために最適化されています。アプリケーションよりも前でフィルタリングすることで、不要なトラフィックがアプリケーションサーバーに負荷をかけることを防ぎます。

3. **スケーラビリティ**: LBでの制限は、複数のアプリケーションサーバーに対して一元的に管理できます。これにより、新しいサーバーを追加する際の設定の手間が省けます。

4. **メンテナンス**: アプリケーションのコードを変更することなく、LBの設定を更新することでIP制限リストを簡単に変更できます。

ただし、アプリケーションの特定の機能に対して細かいIP制限をかけたい場合や、アプリケーションレベルでの特定のビジネスロジックに基づくIP制限が必要な場合は、アプリケーション内での実装が必要になることもあります。状況に応じて適切な方法を選択してください。
```

Q: 他の理由はある？

```
はい、他にもいくつかの理由が考えられます。以下に追加の理由を挙げます：

5. **集中管理**: LBでのIP制限は、複数のアプリケーションやサービスに対して一元的にアクセスポリシーを管理することを可能にします。これにより、ポリシーの一貫性を保ちやすくなります。

6. **可視性と監視**: LBは通常、トラフィックの監視とログ記録の機能を備えています。これにより、許可されたIPとブロックされたIPのトラフィックを効果的に監視し、セキュリティインシデントの分析に役立てることができます。

7. **コスト効率**: アプリケーションサーバーではなく、LBでIP制限を行うことで、不要なトラフィックがアプリケーション層に到達することを防ぎ、サーバーのリソースを節約できます。これは、コスト削減にもつながります。

8. **コンプライアンス**: 特定の規制や法律によっては、データを処理する前にアクセス制御を行うことが求められる場合があります。LBでのIP制限は、これらの要件を満たすのに役立ちます。

9. **フェイルオーバーと冗長性**: LBはフェイルオーバーと冗長性を提供することができ、一つのアプリケーションサーバーがダウンした場合でも、他のサーバーがトラフィックを引き継ぐことができます。IP制限もこのプロセスの一部として維持されます。

10. **アプリケーションの複雑性の軽減**: アプリケーションのコードにIP制限のロジックを組み込むと、アプリケーションの複雑性が増し、保守が難しくなる可能性があります。LBで制限をかけることで、アプリケーションのシンプルさを保つことができます。

これらの理由を総合的に考慮して、IP制限をどこで実施するかを決定することが重要です。状況によっては、LBとアプリケーションの両方でIP制限を行うことで、セキュリティを強化する層状のアプローチを取ることも有効です。
```
