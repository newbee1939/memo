---
marp: true
theme: gaia
class: invert
size: 16:9
style: |
  img[alt='center'] {
      display: block;
      margin: 0 auto;
  }
  strong,b {
    color: red;
  }
  h2 strong,b {
    color: red;
  }
---

<!--
_class:
  - lead
  - invert
_footer: ""
-->

# 関数型ドメインモデリング

---

<!--
_class:
  - lead
  - invert
_footer: ""
-->

# 第1部: ドメインの理解

---

<!--
_class:
  - lead
  - invert
_footer: ""
-->

# P6 第1章: ドメイン駆動設計の紹介

---

## ソフトウェア開発者の仕事

- ❎ コードを書く
- ⭕️ ソフトウェアを使って「問題」を解決する

---

## 問題を解決するために必要なこと

- 問題を正しく「理解」する

---

## 問題を正しく理解するために必要なこと

- 問題を最もよく理解している人（ドメインエキスパート）と密接にコミュニケーションを取る
  - ただ、これだけだとコードに対する「翻訳」作業が発生する
  - 認識のズレにつながる...
- ドメインエキスパート・開発者・コードが同じメンタルモデルを共有する
  - メンタルモデルをコードに直接反映する
  - ドメインエキスパートからコードへの翻訳作業が発生しない
  - 認識のズレも生まれにくい
    - `ドメイン駆動設計が目指すところ`

---

## 共通のモデルを作成するガイドライン

- データ構造ではなく、ビジネスイベント（`ドメインイベント`）やワークフローに焦点を当てる
  - ドメインイベントはモデル化したいビジネスプロセスの「出発点」なので
  - ドメインの探索には`イベントストリーミング`が有効
- ドメインをより小さなサブドメインに分割する
  - 問題を小さくする
- 各サブドメインのモデルを解決空間に作成する
  - 「問題空間（現実世界）」と「解決空間（ドメインモデル）」を区別
  - ドメインの必要な部分だけを取り出して解決空間にマッピング
  - 解決空間では、問題空間のドメインとサブドメインがDDD用語で`境界づけられたコンテキスト`と呼ばれるものにマッピングされる
    -  コンテキストとしてそれぞれを独立させることで保守性を上げる
  - `コンテキストマップ（設計の詳細に巻き込まれることなく、コンテキスト間の相互作用・全体像を伝える方法が必要）`を作成する
- プロジェクトに関わる全ての人が共有し、コードのあらゆる場所で使用される共通言語（`ユビキタス言語`）を開発する
  - チームの全員が共有する概念と語彙のセット
  - ビジネスドメインの共有メンタルモデルを定義する言語

---

## ソフトウェアモデルとビジネスドメインを一致させることによるメリット

- 市場投入までの時間短縮
- ビジネス価値の向上
- 無駄の削減
- メンテナンスと進化の容易さ

---

## ドメイン駆動設計の概念の要約

- ドメイン
  - 解決しようとしている問題に関連する知識の領域  
  - ドメインエキスパートが専門としている物事
- ドメインモデル
  - あるドメインにおいて、k定の問題に関連した側面を単純化して表現したものの集合
  - ドメインモデルは解決空間の一部
  - ドメインモデルが表現するモデルは問題空間の一部
- ユビキタス言語  
  - ドメインに関連する概念と語彙の集合
  - チームメンバーとソースコードの両方で共有される
- 境界付けられたコンテキスト
  - 解決空間内のサブシステム  
  - 明確な境界線で他のサブシステムと区別されている
  - 境界付けられたコンテキストは、しばしば問題空間のサブドメインに対応する
- コンテキストマップ
  - 境界付けられたコンテキストの集合体とそれらの関係を示す大まかな図
- ドメインイベント
  - システムで起こったことの記録
  - 常に過去形で記述される
- コマンド
  - なんらかの処理をするための要求
  - 人や他のイベントによってトリガーされる

---

<!--
backgroundColor: black
footer: ""
-->
