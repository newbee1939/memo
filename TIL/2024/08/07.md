## connection poolについて

あらかじめ接続した状態を用意しておいて、それを貸し出すことで、使うときに接続する手間を減らす機能。

アプリのコードからデータベースにアクセスする際、通常次のような手順を踏む。

1. アプリとデータベースとの接続を確立する
2. トランザクションを開始する
3. SQLを実行する
4. トランザクションを終了する
5. データベースとの接続を切断する

このうち、1.の`データベースに接続する処理は処理負荷が大きく、時間もかかる`。

複数のリクエストを同時に処理するシステムではこの時間や負荷が無視できないため、それらを軽減する仕組みが必要となる。

これがコネクションプールである。

コネクションプールの機能は次の２つ。

- トランザクション終了(4.)のあと、確立した接続の切断(5.)をせず、一か所で保存(プール)する
- 新規リクエストが来た際、プールしてある接続を貸し出す

https://qiita.com/hiroshi-ishihara/items/449eb120fece242f1a0d

https://e-words.jp/w/%E3%82%B3%E3%83%8D%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%97%E3%83%BC%E3%83%AA%E3%83%B3%E3%82%B0.html

## Prismaのconnection_limit

当たり前の話として、Prismaのconnection_limitを上げるということは、DBに対する接続数が増えるということなので、DBの性能（CPU）は（必要に応じて）上げる必要がある。

https://qiita.com/kurab/items/8b3ea68b8a8b4468b5a3
