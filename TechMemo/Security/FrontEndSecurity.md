## 検証用リポジトリ

https://github.com/newbee1939/frontend-security

## HTTP基礎

- ブラウザは`HTTP`という通信規則に従ってサーバと通信をして、リソースの取得や作成、更新、削除を行う

## HTTPS

TODO: ハンズオンもする

実際にユーザーに提供するWebアプリケーションでは`必ず`HTTPSで通信をする。

### HTTPの弱点

- 通信データの盗聴が可能
- 通信相手のサーバが本物かわからない
- 通信内容の改ざんが可能

### HTTPの弱点を解決するTLS

- HTTPS = `HTTP over TLS`
- HTTPSは`TLS`という通信プロトコルを用いて、HTTPデータを暗号化して通信する仕組み
- HTTPデータをやりとりする前に`TLSハンドシェイク`と呼ばれる一連の手順によって暗号通信が確立される
- TLSを使った通信はHTTPの弱点を解消することができる
- 具体的には、TLSを使った通信では以下を実現する
    - 通信データの暗号化
    - 通信相手の検証
    - 通信データの改ざんチェック

### 通信データの暗号化

- ブラウザとサーバがHTTP通信をする前に通信の暗号化をする
- 暗号化には鍵暗号方式が使われている
- ブラウザとサーバで秘密裏に交換した暗号鍵を使ってデータの暗号化と復号を行う
- 通信の暗号化には`公開鍵暗号方式`と`共通鍵暗号方式`という二つの暗号方式を使う
- 公開鍵暗号方式
    - データの暗号化に用いる共通鍵を安全に交換するために使う
    - 暗号鍵の受け渡しが楽
- 共通鍵暗号方式
    - HTTP通信でやりとりするデータの暗号化に使われる
    - 暗号化と復号が高速

### 通信相手の検証

- TLSでは、`電子証明書`を使って通信相手が本物か確認する
- 電子証明書は`認証局（CA）`と呼ばれる社会的に信頼されている機関によって発行される
- サーバーから送信された電子証明書はブラウザによって正しいかどうか検証され、あらかじめブラウザやOSの中に組み込まれている電子証明書と照合される
- もしCAから発行されていない電子証明書が使用されていると、ブラウザは`警告画面`を表示する

### HTTPS化の推進

新しいアプリを作るときにはhttpsにする

### Mixed Contentの危険性

- `Mixed Contents` = Webアプリケーション内に、HTTP通信で読み込んでいるリソースが混在している状態
    - ex. アプリ内のJavaScriptや画像などのサブリソースがHTTPで配信されている
- Mixed Contentsは解消する必要がある
- Mixed Contentsには2種類ある
    - `Passive mixed contents`
        - 画像、動画、音声ファイルといったリソースがHTTP
        - ブラウザで実行されるコードを含まないため危険度は低い
    - `Active mixed contents`
        - JSやCSSやブラウザ上でコードが実行されるリソースがHTTP
        - セキュリティ攻撃につながる可能性があるため危険