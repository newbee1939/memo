## レイヤードアーキテクチャとは

- レイヤードアーキテクチャはドメイン駆動設計の文脈で登場するアーキテクチャの中で、もっとも伝統的で最も有名なアーキテクチャ
- いくつかの層が積み重なる形で表現される
- レイヤードアーキテクチャは以下の4つの層で構成される
    - プレゼンテーション層（ユーザーインターフェース層）
        - クライアントとの入出力
    - アプリケーション層
        - ex. アプリケーション層
        - ドメイン層の住人を取りまとめる
        - ユースケース層の実現
    - ドメイン層
        - ドメイン知識の表現
    - インフラストラクチャ層
        - 他の層を支える技術的基盤へのアクセスを提供する
        - ドメインのための永続化など
        - データベースとの入出力

## レイヤードアーキテクチャの課題

- ドメイン層がインフラ層に依存してしまう
- 一番実装に困る機会が多いのがリポジトリ
- ドメイン層にリポジトリを置く場合、そのリポジトリが特定のDBやORマッパーに依存した実装になる
- インターフェースを挟めばある程度影響を抑えられるが、ドメイン層自体が特定のインフラ技術に依存することは避けられなくなる
- 「モデルを継続的に改善する」「モデルを継続的にソフトウェアに反映する」ということを行うために、`ドメイン層は特定のインフラ技術に依存せず、独立した実装にする`ことを目指したい
- これの解決策として提唱されたのが`オニオンアーキテクチャ`